# Test configuration for hsc-registry-server
# 测试环境配置

server:
  port: 0  # 随机端口

logging:
  level:
    io.github.alvin.hsc.registry.server: DEBUG
    org.springframework.web: DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

hsc:
  registry:
    server:
      # 健康检查配置
      health-check:
        enabled: true
        default-interval: 10s
        default-timeout: 3s
        max-retry: 2
        
      # 存储配置
      storage:
        type: memory
        eviction-interval: 30s
        
      # 集群配置（测试环境禁用）
      cluster:
        enabled: false
        
      # 安全配置（测试环境启用）
      security:
        enabled: true
        api-key: test-integration-key-2024
        header-name: X-Registry-API-Key
        query-param-name: api_key
        public-paths:
          - /actuator/health
          - /actuator/info
          - /actuator/prometheus
          - /management/info
        auth-error-code: AUTH_001
        auth-error-message: API key authentication required
        
      # 监控配置
      monitoring:
        metrics-enabled: true
        health-endpoint: /actuator/health

# Spring Boot Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always